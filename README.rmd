---
title: "README"
author: "Jinju Kim"
date: "6-4-2021"
output: html_document
---

# Computational text analysis for Twitter data 

This package is for text analysis including preprocessing, topic modelling, semantic network, and sentiment analysis. The function includes both analysis and graphic visualization.  


```{r}
library(devtools)
install_github("BeaJJ/ComTxt",ref='trunk')

library(ComTxt)
## preprocessing
library(udpipe)
library(dplyr)
## topicmodelling
library(mallet)
library(stopwords)
##visualizing topic
library(RColorBrewer)
library(wordcloud)
library(rlist)
library(kableExtra)
library(igraph)
##semantic network
library(quanteda)
##sentiment analysis
library(tidytext) #Text mining
library(tidyr) #Spread, separate, unite, text mining (also included in the tidyverse package)
library(widyr) #Use for pairwise correlation
library(textdata)
library(readxl)
##visualizing sentiment
#Visualizations!
library(ggplot2) #Visualizations (also included in the tidyverse package)
library(ggrepel) #`geom_label_repel`
library(gridExtra) #`grid.arrange()` for multi-graphs
library(knitr) #Create nicely formatted output tables
library(formattable) #For the color_tile function
library(circlize) #Visualizations - chord diagram
library(memery) #Memes - images with plots
library(magick) #Memes - images with plots (image_read)
library(yarrr)  #Pirate plot
library(radarchart) #Visualizations
library(igraph) #ngram network diagrams
library(ggraph)

```

## Preprocessing 

The preprocessing is based on UDpipe package. The function eliminate URLs, Emoticon, stopwords and finally return to lemma. 


```{r}
## preprocess : lemmatization, stopwords, urls, emoticons
df_pre <- twitter_preprocess(twitter_df, ud_lang = "spanish", stopwords_lang = "es")
```

## Mallet Topic Modeling  

```{r}
## Topic modeling------------------------------------------------------
### mallet topic modeling
df_topics <- twitter_topic(df_pre, language = "es", n_topic = 7)

### data frame words topic
words <- topic_getwords(df_topics, n_topic = 7, n_words = 100)
kable(words, "simple")
### draw wordscloud for each topics 3*3 = 9 spots (depending on your topic numbers)
dev.off()
topic_wordcloud(df_topics, par_row = 3, par_col = 3, n_topic = 7, maximum_n = 200, cloud_scale = 2.5)

### draw topic semantic networks
dev.off()
topic_network(df_topics, n_nodes = 50, igraph_semantic_label= 0.007)

```

## Semantic network 

```{r}
## semantic network ----------------------------------------
### semantic general
semantic_network(df_pre, n_top = 40)

### semantic hub network
semantic_network_hub(df_pre, hub = "arte")

```

## Sentiment analysis 

```{r}
## Sentiment analysis ------------------------------
### NRC sentiment analysis
df_sent <- twitter_sentiment(df_pre, language = "es", undesirable_words = c("lol", "wtf"))

### sentiment bar plot
sentiment_bar(df_sent, by = "%m%Y")

### sentiment wordsplot
sentiment_wordsplot(df_sent)

### sentiment circos plot
sentiment_circos(df_sent)

### sentiment radarmap
sentiment_radarmap(df_sent)

### sentiment semantic network
sentiment_semantic(df_sent, select = "Anticipation", n_nodes = 200)

```

